# Тестовое задание на Spring Boot

Проект состоит из трех модулей:
 * api-module
 * crud-module
 * reports-module

### api-module
Тут содержатся общие для двух других модулей модели и классы.

### crud-module
Модуль держит in-memory БД _H2_ и _REST_ веб-сервис для работы с сущностями.

Веб-сервис запускается на `localhost:8080` и поддерживает запросы по следующим _URL_:
 * `.../workers - POST, GET`
 * `.../workers/{id} - GET, DELETE`
 * `.../departments - POST, GET`
 * `.../departments/{id} - GET, DELETE`
 * `.../worked_hours - POST, GET`
 * `.../worked_hours/{workerId} - GET, DELETE`

В `POST`-запросах, в теле должна быть передана создаваемая или обновляемая сущность в формате _JSON_.

В ответ на любой запрос будет возвращена сущность _Response_ с кодом ответа (см. `ru.softage.task.api.Code`),
кратким описанием (статус, либо сообщение об ошибке) и со списком запрашиваемых сущностей.

БД поддерживает веб-консоль: `http://localhost:8080/h2-console`. _Datasource_: `jdbc:h2:mem:task_db`. Маппинг сущностей:
 * _DepartmentEntity_ (таблица `departments`) - таблица с отделами, где работают сотрудники
 * _WorkedHoursEntity_ (таблица `worked_hours`) - таблица с записями о рабочих часах сотрудников
 * _WorkerEntity_ (таблица `workers`) - таблица с сотрудниками

Во время запуска модуля в БД сразу заносится несколько записей с помощью _SQL_-скрипта (`crud-module/src/main/resources/data.sql`).

Модуль логгирует свои действия в `logs/app.log` (директория будет создана автоматически рядом с `crud-module-X.X.jar`).

В `crud-module/src/test/` есть несколько простых юнит-тестов на основные позитивные сценарии.

### reports-module
Модуль выполняет запросы к `crud-module`. Для простоты все _URL_-адреса запросов прописаны в коде.

Модуль строит 2 отчета: 
* **General Report.txt** со списком всех известных отделов и работающих там сотрудников
* **Individual Report [id].txt** с информацией о конкретном сотруднике и его отработанных часах

Может быть запущен с параметром `-c` или `-console`, чтобы отчет выводился в консоль. 
В обычном случае отчеты будут созданы в директории `reports/` (директория будет создана автоматически 
рядом с `reports-module-X.X.jar`).
Параметр опциональный, но должен стоять первым, если пристутствует.

Также может присутствовать параметр `-id X` с ID сотрудника, по которому будет строиться персональный отчет.
Если отсутствует, отчет будет сделан для сотрудника с ID = 1.

Модуль логгирует свои действия в консоль.
